<!DOCTYPE html>
<html>
<head>
<title> Weather Generator </title>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="Weather.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  
<script>
$(document).ready(function(){
    $("#GetWeatherButton").click(function(){    	   
        $.get("WeatherServlet", function(data, status){                	
          	loadData(data);           
          	document.getElementById("GetWeatherButton").disabled = true;
          	document.getElementById("AddReview").disabled = false;
        });
        
    });
});
</script>

<script>


$(document).ready(function(){
    $("#AddReview").click(function(){
        $.post("ReviewsServlet",
        {
          gameName: "weather",
          stars: document.getElementById("starField").value, 
          text: document.getElementById("comment").value, 
          
        },
        function(data,status){
            alert("Data: " + data + "\nStatus: " + status);
        });
    });
});
</script>


<script>
function loadData(data){
	var parent = document.getElementById("dataLoad");
	var child = document.getElementById("starter");
	parent.removeChild(child);
	
	  var tokenedIntoPair = data.split("/");
	  var length = tokenedIntoPair.length;	  
	  for(i = 0; i<length; i++){
		 var tokenedTextPic = tokenedIntoPair[i].split("*");
		 var sublength = tokenedTextPic.lenght;
		 
		  var pic = document.createElement("IMG");
		  pic.setAttribute("src","./Images/" +  tokenedTextPic[1]);
		  pic.setAttribute("width", "100");
		  pic.setAttribute("width", "100");	
		  pic.setAttribute("class", "wImg");
		  var text = document.createElement("h4");
		  text.setAttribute("class", "wText");
		  var node = document.createTextNode(tokenedTextPic[0]);
		  text.appendChild(node);
		  
		  var div = document.createElement("div");
		  div.setAttribute("class", "comb");
		  div.appendChild(pic);
		  div.appendChild(text);
		  document.getElementById("dataLoad").appendChild(div);
		  		  
	  }
}

function starClick(x){
	var fullID = x.id;
	var stringID  = fullID.charAt(1);
	var id = parseInt(stringID);
	document.getElementById("starField").value = id;
	onemouseStar(document.getElementById(("i")+id));
}

function onmouseStar(x){
	var fullID = x.id;
	var stringID  = fullID.charAt(1);
	var id = parseInt(stringID);
	for(i = 1; i<=id; i++){
		 var image = document.getElementById("i" + i);
		 image.src = "./Images/star-full.png";
	}
	
	for(i = id + 1; i<=5; i++){
		 var image = document.getElementById("i" + i);
		 image.src = "./Images/star-empty.png";
	}
}


function outmouseDiv(){
	var stringID = document.getElementById("starField").value;
	var id = parseInt(stringID);
	if(id == 0){
		for(i = 1; i<=5; i++){
			 var image = document.getElementById("i" + i);
			 image.src = "./Images/star-empty.png";
		}
	}
	else onmouseStar(document.getElementById(("i")+id));
}

function scrollDownWindow(){
    	 $(window.opera ? 'html' : 'html, body').animate({
    		    scrollTop: $(document).height()
   		}, 1000);    
 
	document.getElementById("scroll").onclick = scrollUpWindow;
}

function scrollUpWindow(){

	$(window.opera ? 'html' : 'html, body').animate({
	    		    scrollTop: 0
	    		}, 1000);    
	 
	document.getElementById("scroll").onclick = scrollDownWindow;
}



  

</script>
</head>
<body>	

<div class = "cover">
<div id = "dataLoad" class = "dataDiv"> <h3 id = "starter" class = "starter"> დღევანდელი ამინდის ადგილი</h3></div>
</div>
<button id = "GetWeatherButton" type="button" class="btn btn-success btn-lg">დღეს როგორი დარია?</button>

<div class =  scroll>
 <img id = scroll onclick = "scrollDownWindow()" class = scroll src="./Images/scroll-down.png">
</div>
<div class= reviewCover>
<div class = review>
<div class=starCover onmouseout=outmouseDiv()>
<img id =i1 onclick="starClick(this)" onmouseover="onmouseStar(this)" onmouseout="outmouseStar(this)" class = star src="./Images/star-empty.png" > 
<img id =i2 onclick="starClick(this)" onmouseover="onmouseStar(this)" onmouseout="outmouseStar(this)"  class = star src="./Images/star-empty.png" > 
<img id =i3 onclick="starClick(this)" onmouseover="onmouseStar(this)" onmouseout="outmouseStar(this)"  class = star src="./Images/star-empty.png" > 
<img id =i4 onclick="starClick(this)" onmouseover="onmouseStar(this)" onmouseout="outmouseStar(this)"  class = star src="./Images/star-empty.png" > 
<img id =i5 onclick="starClick(this)" onmouseover="onmouseStar(this)" onmouseout="outmouseStar(this)"  class = star src="./Images/star-empty.png" > 
</div>
<input  id = starField name="lname" value = 0 ><br>
<textarea class="form-control" rows="5" id="comment"></textarea>
<button id = "AddReview" type="button"  disabled class="btn btn-success btn-lg">დაამატე კომენტარი</button>
</div>
</div>
</body>
</html>
